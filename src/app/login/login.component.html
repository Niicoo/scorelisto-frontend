<div [class.blurred]="WaitingForAnAnswer">
	<div class="ContentToBlurWhenWaiting">
		<div class="container" >
			<div class="loadingdiv"></div>
			<div class="row justify-content-center">
				<div id="logindiv" class="col-xl-7 col-lg-7 my-5">
					<div id="img_favicon" class="row justify-content-center">
						<img class="my-3" src="/assets/favicon_nude.svg" alt="" width="100" height="100">
					</div>


					<ul class="nav nav-fill nav-justified">
						<li id="nav-item-login" class="nav-item" [class.active]="displayLoginForm">
							<a class="nav-link" (click)="showLoginForm()">LOGIN</a>
						</li>
						<li id="nav-item-register" class="nav-item" [class.active]="displayRegisterForm">
							<a class="nav-link" (click)="showRegisterForm()">REGISTER</a>
						</li>
					</ul>

					<ul *ngIf="displayForgotPasswordForm" class="nav nav-fill nav-justified">
						<li class="nav-item" [class.active]="true">
							<a class="nav-link">RESET PASSWORD</a>
						</li>
					</ul>



			    	<div *ngIf="displayLoginForm">
						<form class="container-fluid" [formGroup]="SignInForm" (ngSubmit)="onSubmitSignIn()">
								<div class="form-group">
									<label class="sr-only" for="inputUsername">Username</label>
									<input class="form-control mb-3" type="text" placeholder="username" required autofocus formControlName="username">
								</div>
								<div *ngIf="SignInForm.controls.username.invalid && (SignInForm.controls.username.dirty || SignInForm.controls.username.touched)"
								    class="alert alert-danger">
									Username or Email is required.
								</div>
								<div class="form-group">
									<label class="sr-only" for="inputPassword">Password</label>
									<input class="form-control mb-3" type="password" placeholder="password" required formControlName="password">
								</div>
								<div *ngIf="SignInForm.controls.password.invalid && (SignInForm.controls.password.dirty || SignInForm.controls.password.touched)"
								    class="alert alert-danger">
									Password is required.
								</div>
								<div>
									<p><a id="link_pw_forgot" (click)="showForgotPasswordForm()">Forgot Password ?</a></p>
								</div>
							<div class="row justify-content-center">
								<button class="btn btn-lg btn-block btn-form" type="submit" [disabled]="!SignInForm.valid">Sign in</button>
							</div>
						</form>
					</div>


					<div *ngIf="displayForgotPasswordForm">
						<form class="container-fluid" [formGroup]="ForgotPasswordForm" (ngSubmit)="onSubmitResetPassword()">
							<div class="form-group">
								<label class="sr-only">Email adress</label>
								<input class="form-control mb-3" type="email" placeholder="email" required formControlName="email">
							</div>
							<div *ngIf="ForgotPasswordForm.controls.email.invalid && (ForgotPasswordForm.controls.email.dirty || ForgotPasswordForm.controls.email.touched)"
								class="alert alert-danger">
								<div *ngIf="ForgotPasswordForm.controls.email.errors.required">
									Email is required.
								</div>
								<div *ngIf="ForgotPasswordForm.controls.email.errors.email">
									Invalid email adress
								</div>
							</div>
							<div class="row justify-content-center">
								<button class="btn btn-lg btn-block btn-form" type="submit" [disabled]="!ForgotPasswordForm.valid">Reset password</button>
							</div>
						</form>
					</div>

					<div *ngIf="displayRegisterForm">
						<form class="container-fluid" [formGroup]="RegisterForm" (ngSubmit)="onSubmitRegister()">
							<div class="form-group">
								<label class="sr-only">Username</label>
								<input class="form-control mb-3" type="text" placeholder="username" required formControlName="register_username">
							</div>
							<div *ngIf="RegisterForm.controls.register_username.invalid && (RegisterForm.controls.register_username.dirty || RegisterForm.controls.register_username.touched)"
							    class="alert alert-danger">
							  <div *ngIf="RegisterForm.controls.register_username.errors.required">
							    Username is required.
							  </div>
							  <div *ngIf="RegisterForm.controls.register_username.errors.pattern">
							    Username must be between 6 and 20 characters long. Only letters and numbers
							  </div>
							</div>


							<div class="form-group">
								<label class="sr-only" for="inputRegisterEmail">Email</label>
								<input class="form-control mb-3" type="email" placeholder="email" required formControlName="register_email">
							</div>
							<div *ngIf="RegisterForm.controls.register_email.invalid && (RegisterForm.controls.register_email.dirty || RegisterForm.controls.register_email.touched)"
								class="alert alert-danger">
								<div *ngIf="RegisterForm.controls.register_email.errors.required">
									Email is required.
								</div>
								<div *ngIf="RegisterForm.controls.register_email.errors.email">
									Invalid email adress
								</div>
							</div>


							<div class="form-group">
								<label class="sr-only">Confirm Email</label>
								<input class="form-control mb-3" type="email" placeholder="confirmemail" required formControlName="register_confirmemail">
							</div>
							<div *ngIf="RegisterForm.controls.register_confirmemail.invalid && (RegisterForm.controls.register_confirmemail.dirty || RegisterForm.controls.register_confirmemail.touched)"
							    class="alert alert-danger">
							  Email adress don't match
							</div>



							<div class="form-group">
								<label class="sr-only" for="inputPassword">Password</label>
								<input class="form-control mb-3" type="password" placeholder="password" required formControlName="register_password">
							</div>
							<div *ngIf="RegisterForm.controls.register_password.invalid && (RegisterForm.controls.register_password.dirty || RegisterForm.controls.register_password.touched)"
							    class="alert alert-danger">
							  <div *ngIf="RegisterForm.controls.register_password.errors.required">
							    Password is required.
							  </div>
							  <div *ngIf="RegisterForm.controls.register_password.errors.pattern">
							    Password must be between 8 and 32 characters long.
							  </div>
							</div>


							<div class="form-group">
								<label class="sr-only" for="inputPassword">Confirm Password</label>
								<input class="form-control mb-3" type="password" placeholder="confirmpassword" required formControlName="register_confirmpassword">
							</div>
							<div *ngIf="RegisterForm.controls.register_confirmpassword.invalid && (RegisterForm.controls.register_confirmpassword.dirty || RegisterForm.controls.register_confirmpassword.touched)"
							    class="alert alert-danger">
							  Passwords don't match
							</div>


							<div class="row justify-content-center">
								<button class="btn btn-lg btn-block btn-form" type="submit" [disabled]="!RegisterForm.valid">Register</button>
							</div>
						</form>
					</div>

					<!-- REGISTER OK VIEW -->
					<div class="text-center m-5" *ngIf="displayRegistrationOK">
						<p>A link has been sent to {{emailRegistrationOK}} in order to activate your account</p>

						<p>After some minutes, if you did not receive the email, please check your spam folder,</p>
						<p>If the email is not in your spam folder, please click on the following link to send an activation link</p>
						<p><a class="inline-link" (click)="reSendActivationLink()">Resend email</a></p>
						<p>Already Activated ? => <a class="inline-link" (click)="showLoginForm()"> login</a></p>
					</div>

					<p class="mt-5 mb-3 text-muted text-center">&copy; 2019-2020</p>
				</div>
			</div>
		</div>

	</div>
	<div class="LoadingToPlotWhenWaiting">
		<div></div>
	</div>
</div>
